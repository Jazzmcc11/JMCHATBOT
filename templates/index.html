<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Big Sis Studio</title>

  <style>
    :root{
      /* Core palette */
      --bg: #fbf6ef;              /* warm cream */
      --panel: #ffffff;
      --text: #1a1a1a;
      --muted: #6b6b6b;
      --border: rgba(0,0,0,.12);

      /* Accent colors */
      --burnt: #c65a1e;           /* burnt orange */
      --tiffany: #7fdad1;         /* tiffany blue */
      --charcoal: #111827;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      padding:32px;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(700px 350px at 15% 0%, rgba(198,90,30,.12), transparent 60%),
        radial-gradient(700px 350px at 85% 10%, rgba(127,218,209,.18), transparent 60%),
        var(--bg);
    }

    .wrap{
      max-width:980px;
      margin:0 auto;
    }

    /* Header */
    h1{
      margin:0;
      font-size:56px;
      letter-spacing:-1px;
      line-height:1.05;
    }

    .sub{
      margin:10px 0 6px;
      font-size:17px;
      color:var(--muted);
    }

    .studioLine{
      margin-top:14px;
      padding-top:10px;
      border-top:2px solid var(--burnt);
      font-weight:800;
      letter-spacing:.3px;
      color:var(--charcoal);
    }

    /* Chat panel */
    .panel{
      margin-top:28px;
      background:var(--panel);
      border:1px solid var(--border);
      border-radius:18px;
      padding:20px;
      min-height:280px;
      box-shadow:0 20px 50px rgba(0,0,0,.08);
    }

    .line{
      margin:12px 0;
      font-size:18px;
      line-height:1.45;
      white-space:pre-wrap;
    }

    .label{
      font-weight:900;
    }

    .label.big{
      color:var(--charcoal);
      position:relative;
    }

    .label.big::before{
      content:"";
      display:inline-block;
      width:10px;
      height:10px;
      background:var(--tiffany);
      border-radius:2px;
      margin-right:8px;
      transform:translateY(1px);
    }

    .typing{
      font-style:italic;
      color:var(--muted);
    }

    /* Controls */
    .controls{
      margin-top:26px;
      display:grid;
      gap:14px;
    }

    .labelSmall{
      font-size:13px;
      font-weight:900;
      letter-spacing:.4px;
      color:var(--charcoal);
      text-transform:uppercase;
    }

    select, input{
      width:100%;
      padding:14px;
      font-size:16px;
      border-radius:12px;
      border:1px solid var(--border);
      background:#fdfdfd;
      outline:none;
    }

    select:focus, input:focus{
      border-color:var(--burnt);
      box-shadow:0 0 0 4px rgba(198,90,30,.15);
    }

    .row{
      display:grid;
      grid-template-columns:1fr auto auto;
      gap:10px;
      align-items:center;
    }

    button{
      padding:14px 18px;
      border-radius:12px;
      font-weight:900;
      border:none;
      cursor:pointer;
    }

    .primary{
      background:var(--charcoal);
      color:#fff;
    }

    .secondary{
      background:transparent;
      border:1px solid var(--border);
      color:var(--charcoal);
    }

    .hint{
      margin-top:6px;
      font-size:13px;
      color:var(--muted);
    }

    .footerNote{
      margin-top:10px;
      font-size:12px;
      color:var(--muted);
    }

    @media (max-width:700px){
      h1{font-size:42px}
      .row{grid-template-columns:1fr}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <h1>Big Sis Studio</h1>
    <p class="sub">Fit • Sound • Sports • Moodboards</p>
    <div class="studioLine">Tomboy-chic lifestyle help — from someone who gets it.</div>

    <div class="panel" id="chatPanel">
      <div class="line">
        <span class="label big">Big Sis Studio:</span>
        Aight sis. We locked in. What we on today?
      </div>

      <div id="chatLines"></div>

      <div id="typing" class="line typing" style="display:none;">
        Big Sis Studio is typing…
      </div>
    </div>

    <div class="controls">
      <div>
        <div class="labelSmall">Focus</div>
        <select id="mode">
          <option value="fit">Fit Check</option>
          <option value="sound">Soundtrack</option>
          <option value="sports">Sports Talk</option>
          <option value="mood">Moodboard</option>
        </select>
      </div>

      <div>
        <div class="labelSmall">Say it how you say it</div>
        <div class="row">
          <input id="msg" placeholder="UNC 1s for brunch…" />
          <button class="primary" id="sendBtn">Send</button>
          <button class="secondary" id="resetBtn">Reset</button>
        </div>
        <div class="hint">
          Ex: “Jordan 1 UNC for brunch” • “Soft focus while I code”
        </div>
        <div class="footerNote">
          Big sis rule: clarity first, aesthetics second — but we still gon’ look good.
        </div>
      </div>
    </div>
  </div>

  <script>
    const chatLines = document.getElementById("chatLines");
    const typing = document.getElementById("typing");
    const msg = document.getElementById("msg");
    const mode = document.getElementById("mode");

    function addLine(label, text, isBigSis=false){
      const div = document.createElement("div");
      div.className = "line";

      const span = document.createElement("span");
      span.className = "label" + (isBigSis ? " big" : "");
      span.textContent = label + " ";

      div.appendChild(span);
      div.appendChild(document.createTextNode(text));
      chatLines.appendChild(div);
      div.scrollIntoView({behavior:"smooth"});
    }

    async function sendMessage(){
      const text = msg.value.trim();
      if(!text) return;

      addLine("You:", text);
      msg.value = "";
      typing.style.display = "block";

      const form = new FormData();
      form.append("message", text);
      form.append("mode", mode.value);

      try {
        const res = await fetch("/chat", { method: "POST", body: form });

        if(!res.ok){
          const t = await res.text();
          throw new Error(`HTTP ${res.status}: ${t}`);
        }

        const data = await res.json();
        addLine("Big Sis Studio:", data.reply || "Talk to me again, sis.", true);

      } catch (err) {
        addLine("Big Sis Studio:", `Sis… something broke. (${err.message})`, true);

      } finally {
        typing.style.display = "none";
      }
    }

    document.getElementById("sendBtn").onclick = sendMessage;

    document.getElementById("resetBtn").onclick = async ()=>{
      typing.style.display = "none";
      try {
        const res = await fetch("/reset",{method:"POST"});
        // if reset isn't set up, this will fail and we'll show it
        if(!res.ok){
          const t = await res.text();
          throw new Error(`HTTP ${res.status}: ${t}`);
        }
        chatLines.innerHTML="";
        addLine("Big Sis Studio:", "Fresh slate. What we doing now?", true);
      } catch (err) {
        addLine("Big Sis Studio:", `Reset didn’t work. (${err.message})`, true);
      }
    };

    msg.addEventListener("keydown", e => {
      if(e.key === "Enter") sendMessage();
    });
  </script>
</body>
</html>

